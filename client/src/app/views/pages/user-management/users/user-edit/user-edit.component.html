<kt-portlet>
	<kt-portlet-header [title]="getComponentTitle()" [class]="'kt-portlet__head--lg'" [viewLoading$]="loading$"style="color: white;">
		<ng-container ktPortletTools>
			<a [routerLink]="['../../']" class="btn btn-secondary kt-margin-r-10" mat-raised-button matTooltip="Back to the users list">
				<i class="la la-arrow-left"></i>
				<span class="kt-hidden-mobile">Back</span>
			</a>
			<a href="javascript:;" class="btn btn-secondary kt-margin-r-10" (click)="reset()" [disabled]="selectedTab !== 0" mat-raised-button matTooltip="Reset changes">
				<i class="la la-cog"></i>
				<span class="kt-hidden-mobile">Reset</span>
			</a>
			<a href="javascript:;" class="btn btn-primary kt-margin-r-10" color="primary" (click)="onSumbit(false)" mat-raised-button matTooltip="Save & Continue">
				<span class="kt-hidden-mobile">Save</span>
			</a>
			<button mat-icon-button [matMenuTriggerFor]="menu" color="primary">
				<mat-icon>more_vert</mat-icon>
			</button>
			<mat-menu #menu="matMenu">
				<button mat-menu-item color="primary" (click)="onSumbit(true)">Save & Exit</button>
				<button mat-menu-item color="primary">Save & Duplicate</button>
				<button mat-menu-item color="primary" (click)="onSumbit(false)">Save & Continue</button>
			</mat-menu>
		</ng-container>
	</kt-portlet-header>

	<kt-portlet-body>
		<!-- <div class="dropzone dropzone-default dropzone-brand" id="kt_dropzone_1"tyle="background: transparent!important;">
			<div class="dropzone-msg dz-message needsclick">
				<h3 class="dropzone-msg-title">Drop files here or click to upload.</h3>
				<span class="dropzone-msg-desc">Upload up to 10 files</span>
			</div>
		</div> -->
		<mat-tab-group [(selectedIndex)]="selectedTab">
			<mat-tab>
				<ng-template mat-tab-label>
					<i class="mat-tab-label-icon fa fa-user"></i>
					Basic info
				</ng-template>
				<ng-template matTabContent>
					<!--begin::Form-->
					<div *ngIf="user">
						<form [formGroup]="userForm" class="kt-form kt-form--group-seperator-dashed">

							<kt-alert *ngIf="hasFormErrors" type="warn" [showCloseButton]="true" [duration]="10000" (close)="onAlertClose($event)">
								Oh snap! Change a few things up and try submitting again.
							</kt-alert>
							<div class="kt-form__section kt-form__section--first">
								<div class="form-group kt-form__group row">
									<div class="col-lg-6 kt-margin-bottom-20-mobile">
										<mat-form-field class="mat-form-field-fluid">
											<mat-select placeholder="Account Type" name="accountType" formControlName="accountType"  (selectionChange)="changeAccountType($event.value)">
												<!-- <mat-option>asd</mat-option> -->
												<mat-option value="Individual Account">Individual Account</mat-option>
												<mat-option value="Joint Account">Joint Account</mat-option>
												<mat-option value="Corporate Account">Corporate Account</mat-option>
											</mat-select>
										</mat-form-field>
									</div>
								</div>
								<div class="form-group kt-form__group row" *ngIf="selectedAccount == 'Corporate Account'">
									<div class="col-lg-4 kt-margin-bottom-20-mobile">
										<mat-form-field class="mat-form-field-fluid">
											<input matInput placeholder="Name of Company" formControlName="nameCompany"/>
											<mat-error>Name of Company is
												<strong>required</strong>
											</mat-error>
											<mat-hint align="start">Please enter
												<strong>Name of Company</strong>
											</mat-hint>
										</mat-form-field>
									</div>
									<div class="col-lg-4 kt-margin-bottom-20-mobile">
										<mat-form-field class="mat-form-field-fluid">
											<input matInput placeholder="Company Director" formControlName="companyDirector"/>
											<mat-error>Company Director is
												<strong>required</strong>
											</mat-error>
											<mat-hint align="start">Please enter
												<strong>Company Director</strong>
											</mat-hint>
										</mat-form-field>
									</div>
									<div class="col-lg-4 kt-margin-bottom-20-mobile">
										<mat-form-field class="mat-form-field-fluid">
											<input matInput placeholder="Nature of Business" formControlName="natureBusiness"/>
											<mat-error>Nature of Business is
												<strong>required</strong>
											</mat-error>
											<mat-hint align="start">Please enter
												<strong>Nature of Business</strong>
											</mat-hint>
										</mat-form-field>
									</div>
								</div>
								<div class="form-group kt-form__group row">
									<div class="col-lg-6 kt-margin-bottom-20-mobile">
										<mat-form-field class="mat-form-field-fluid">
											<input matInput placeholder="Enter Firstname" formControlName="firstName"/>
											<mat-error>Firstname is
												<strong>required</strong>
											</mat-error>
											<mat-hint align="start">Please enter
												<strong>Firstname</strong>
											</mat-hint>
										</mat-form-field>
									</div>
									<div class="col-lg-6 kt-margin-bottom-20-mobile">
										<mat-form-field class="mat-form-field-fluid">
											<input matInput placeholder="Enter Last Name" formControlName="lastName"/>
											<mat-error>Lastname is
												<strong>required</strong>
											</mat-error>
											<mat-hint align="start">Please enter
												<strong>Lastname</strong>
											</mat-hint>
										</mat-form-field>
									</div>

									
								</div>
								<div class="form-group kt-form__group row" *ngIf="selectedAccount == 'Joint Account'">
									<div class="col-lg-6 kt-margin-bottom-20-mobile">
										<mat-form-field class="mat-form-field-fluid">
											<input matInput placeholder="Enter Joint Firstname" formControlName="firstNameTwo"/>
											<mat-error>Joint Firstname is
												<strong>required</strong>
											</mat-error>
											<mat-hint align="start">Please enter
												<strong>Joint Firstname</strong>
											</mat-hint>
										</mat-form-field>
									</div>
									<div class="col-lg-6 kt-margin-bottom-20-mobile">
										<mat-form-field class="mat-form-field-fluid">
											<input matInput placeholder="Enter Joint Last Name" formControlName="lastNameTwo"/>
											<mat-error>Joint Lastname is
												<strong>required</strong>
											</mat-error>
											<mat-hint align="start">Please enter
												<strong>Joint Lastname</strong>
											</mat-hint>
										</mat-form-field>
									</div>
								</div>
								<div class="form-group kt-form__group row">
									<!-- <div class="col-lg-4 kt-margin-bottom-20-mobile">
										<mat-form-field class="mat-form-field-fluid">
											<input matInput placeholder="Enter Occupation" formControlName="occupation"/>
											<mat-hint align="start">Please enter
												<strong>Occupation</strong>
											</mat-hint>
										</mat-form-field>
									</div> -->
									<!-- <div class="col-lg-4 kt-margin-bottom-20-mobile">
										<mat-form-field class="mat-form-field-fluid">
											<input matInput placeholder="Enter Company Name" formControlName="companyName"/>
											<mat-hint align="start">Please enter
												<strong>Company Name</strong>
											</mat-hint>
										</mat-form-field>
									</div> -->
									<div class="col-lg-6 kt-margin-bottom-20-mobile">
										<mat-form-field class="mat-form-field-fluid">
											<input type="email" matInput placeholder="Enter Email" formControlName="emailAddress"/>
											<mat-error>Email is
												<strong>required</strong>
											</mat-error>
											<mat-hint align="start">Please enter
												<strong>Email</strong>
											</mat-hint>
										</mat-form-field>
									</div>
									<div class="col-lg-6 kt-margin-bottom-20-mobile">
										<mat-form-field class="mat-form-field-fluid">
											<input matInput placeholder="Enter Phone" formControlName="phoneNumber"/>
											<mat-hint align="start">Please enter
												<strong>Phone</strong>
											</mat-hint>
										</mat-form-field>
									</div>
								</div>
							</div>
						</form>
					</div>
					<!--end::Form-->
				</ng-template>
			</mat-tab>
			<mat-tab [disabled]="!user || !user.id">
				<ng-template mat-tab-label>
					<i class="mat-tab-label-icon fas fa-map-marked-alt"></i>
					User Country
				</ng-template>
				<ng-template matTabContent>
					<!-- <div *ngIf="user"> -->
					<!-- <kt-address [(addressSubject)]="addressSubject"></kt-address> -->
					<kt-address [(citizenship)]="citizenship" [(rediance)]="rediance"></kt-address>
			</ng-template>
			
			</mat-tab>
			<mat-tab [disabled]="!user || !user.id">
				<ng-template mat-tab-label>
					<i class="mat-tab-label-icon fas fa-suitcase-marked-alt"></i>
					User Employment Status
				</ng-template>
				<ng-template matTabContent>
					<kt-employment [(networth)]="networth"[(nameemployer)]="nameemployer"[(namecompanyEm)]="namecompanyEm"[(employmentstatus)]="employmentstatus"[(investmentknowledge)]="investmentknowledge"></kt-employment>
			</ng-template>
			
			</mat-tab>
			<mat-tab [disabled]="!user || !user.id">
				<ng-template mat-tab-label>
					<i class="mat-tab-label-icon fas fa-dollar-sign"></i>
					User Investments
				</ng-template>
				<ng-template matTabContent>
					<!-- <kt-social-networks [(socialNetworksSubject)]="soicialNetworksSubject"></kt-social-networks> -->
					<!-- <form [formGroup]="userForm" class="kt-form kt-form--group-seperator-dashed">
						<kt-alert *ngIf="hasFormErrors" type="warn" [showCloseButton]="true" [duration]="10000" (close)="onAlertClose($event)">
							Oh snap! Change a few things up and try submitting again.
						</kt-alert> -->
						<div class="kt-form-section">
							<label>Active Investments</label>
							<div *ngIf="dataSourceTB.data.length > 0 " class="example-container">
								<mat-table #table [dataSource]="dataSourceTB" matSort>
									<!-- Position Column -->
									<ng-container matColumnDef="id">
									  <mat-header-cell *matHeaderCellDef mat-sort-header> id </mat-header-cell>
									  <mat-cell *matCellDef="let element"> {{element.id}} </mat-cell>
									</ng-container>
									<!-- Name Column -->
									<ng-container matColumnDef="type">
									  <mat-header-cell *matHeaderCellDef mat-sort-header> Type </mat-header-cell>
									  <mat-cell *matCellDef="let element"> {{element.bankId.type}} </mat-cell>
									</ng-container>
									<!-- Weight Column -->
									<ng-container matColumnDef="topic">
									  <mat-header-cell *matHeaderCellDef mat-sort-header> Investment </mat-header-cell>
									  <mat-cell *matCellDef="let element"> {{element.bankId.topic}} </mat-cell>
									</ng-container>
									<!-- Symbol Column -->
									<ng-container matColumnDef="equity">
									  <mat-header-cell *matHeaderCellDef mat-sort-header> Equity </mat-header-cell>
									  <mat-cell *matCellDef="let element"> {{format.format(element.equity)}}</mat-cell>
									</ng-container>
									<ng-container matColumnDef="date">
										<mat-header-cell *matHeaderCellDef mat-sort-header> Date invested </mat-header-cell>
										<mat-cell *matCellDef="let element"> {{element.date  | date:'yyyy-MM-dd' }} </mat-cell>
									  </ng-container>
									  <ng-container matColumnDef="option">
										<mat-header-cell *matHeaderCellDef mat-sort-header>Options </mat-header-cell>
										<mat-cell *matCellDef="let element">
											<button (click)="editRequests(element)" mat-icon-button color="primary" matTooltip="Edit Invest">
												<mat-icon>create</mat-icon>
											</button>&nbsp;
											<button mat-icon-button color="warn" matTooltip="Delete Invest" type="button" (click)="delRequests(element)">
												<mat-icon>delete</mat-icon>
											</button>
										</mat-cell>
									  </ng-container>
									<mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
									<mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
								  </mat-table>
							</div>
							<div *ngIf = "dataSourceTB.data.length == 0">
								<p>None</p>
							</div>
						</div>
						<hr>
						<div class="kt-form__section kt-form__section--first">
							<label>Assign New Investments:</label>
							<form [formGroup]="addNewForm" class="kt-form kt-form--group-seperator-dashed">
								<kt-alert *ngIf="hasFormErrors1" type="warn" [showCloseButton]="true" [duration]="10000" (close)="onAlertClose($event)">
									Oh snap! Change a few things up and try submitting again.
								</kt-alert> 
								<div class="form-group kt-form__group row">
									<div class="col-lg-2 kt-margin-bottom-20-mobile">
										<!-- <label>Type:</label>
										<div class="form-group">
											<select name="type" [(ngModel)]="assignNewModel.type"(change)="onChangeType($event)" class="form-control">
												<option value="">Select type</option>
												<option value="Bond">Bond</option>
												<option value="Gilt">Gilt</option>
												<option value="Fund">Fund</option>
											</select>
										</div> -->
										<mat-form-field class="mat-form-field-fluid">
											<mat-select placeholder="Select your Type" formControlName="newType" (selectionChange) = "onChangeType($event)">
												<mat-option value="">Select Type</mat-option>
												<mat-option value="Bond">Bond</mat-option>
												<mat-option value="Gilt">Gilt</mat-option>
												<mat-option value="Fund">Fund</mat-option>
											</mat-select>
											<mat-error>
												Type
												<strong>required</strong>
											</mat-error>
											<mat-hint align="start">Please enter
												<strong>Type</strong>
											</mat-hint>
										</mat-form-field>
									</div>
									<div class="col-lg-4 kt-margin-bottom-20-mobile">
										<!-- <label>Info:</label>
										<div class="form-group">
											<select name="topic" [(ngModel)]="assignNewModel.topic" class="form-control">
												<option value="">Select</option>
												<option value="subResult._id" *ngFor='let subResult of productsResultTemp'>{{subResult.topic}}</option>
											</select>
										</div> -->
										<mat-form-field class="mat-form-field-fluid">
											<mat-select placeholder="Select your Topic" formControlName="newTopic">
												<mat-option value="">Select your Topic</mat-option>
												<!-- <mat-option value="Bond">Bond</mat-option> -->
												<mat-option [value]="subResult._id" *ngFor='let subResult of productsResultTemp'>{{subResult.topic}}</mat-option>
											</mat-select>
											<mat-error>
												Topic
												<strong>required</strong>
											</mat-error>
											<mat-hint align="start">Please enter
												<strong>Topic</strong>
											</mat-hint>
										</mat-form-field>
									</div>
									<div class="col-lg-2 kt-margin-bottom-20-mobile">
										<!-- <label> Equity(GBP):</label>
										<div class="form-group">
											<input type="number" name="equity" placeholder="Equity "[(ngModel)]="assignNewModel.equity" class="form-control">
										</div> -->
										<mat-form-field class="mat-form-field-fluid">
											<input matInput  type="number" placeholder="Enter Equity" formControlName="newEquity">
											<mat-error>
												Equity is
												<strong>required</strong>
											</mat-error>
											<mat-hint align="start">Please enter
												<strong>Equity</strong>
											</mat-hint>
										</mat-form-field>
									</div>
									<div class="col-lg-2 kt-margin-bottom-20-mobile">
										<!-- <label> Date:</label>
										<div class="form-group">
											<input type="date" name="date"[(ngModel)]="assignNewModel.date" value="2020-01-01"class="form-control">
										</div> -->
										<mat-form-field class="mat-form-field-fluid">
											<input matInput type='date' placeholder="Input Date" formControlName="newDate">
											<mat-error>
												Date is
												<strong>required</strong>
											</mat-error>
											<mat-hint align="start">Please enter
												<strong>Date</strong>
											</mat-hint>
										</mat-form-field>
									</div>
									<div class="col-lg-2 kt-margin-bottom-20-mobile">
										<div class="form-group">
											<button class="btn-primary btn" (click)="onSumbit1(user._id)" style="width: 100%;">Confirm</button>
										</div>
									</div>
								</div>	
							</form>
						</div>
				
				</ng-template>
			</mat-tab>
			<mat-tab [disabled]="!user || !user.id">
				<ng-template mat-tab-label>
					<!-- <i class="mat-tab-label-icon fas fa-dollar-sign"></i> -->
					Change Password
				</ng-template>
				<ng-template matTabContent>
					<!-- <kt-social-networks [(socialNetworksSubject)]="soicialNetworksSubject"></kt-social-networks> -->
					<!-- <form [formGroup]="userForm" class="kt-form kt-form--group-seperator-dashed">
						<kt-alert *ngIf="hasFormErrors" type="warn" [showCloseButton]="true" [duration]="10000" (close)="onAlertClose($event)">
							Oh snap! Change a few things up and try submitting again.
						</kt-alert> -->
						<div class="kt-form__section kt-form__section--first">
							<label>New Password Manage:</label>
							<form [formGroup]="changePassForm" class="kt-form kt-form--group-seperator-dashed">
								<kt-alert *ngIf="hasFormErrors2" type="warn" [showCloseButton]="true" [duration]="10000" (close)="onAlertClose($event)">
									Oh snap! Change a few things up and try submitting again.
								</kt-alert> 
									<div class="form-group row ">
									<div class="col-lg-6 kt-margin-bottom-20-mobile">
										<mat-form-field class="mat-form-field-fluid">
											<mat-label>Password</mat-label>
											<input matInput type="password" placeholder="Password" formControlName="newpassword" autocomplete="off"/>
											<mat-error *ngIf="isControlHasError('newpassword','required')">
												<strong>Required field</strong>
											</mat-error>
											<mat-error *ngIf="isControlHasError('newpassword','minlength')">
												<strong>Minimum field length: 3</strong>
											</mat-error>
											<mat-error *ngIf="isControlHasError('newpassword','maxlength')">
												<strong>Maximum field length: 100</strong>
											</mat-error>
										</mat-form-field>
									</div>
									<div class="col-lg-6 kt-margin-bottom-20-mobile">
										<mat-form-field class="mat-form-field-fluid">
											<mat-label>Confirm Password</mat-label>
											<input matInput type="password" placeholder="Confirm Password" formControlName="newconfirmPassword" autocomplete="off"/>
											<mat-error *ngIf="isControlHasError('newconfirmPassword','required')">
												<strong>Required field</strong>
											</mat-error>
											<mat-error *ngIf="isControlHasError('newconfirmPassword','minlength')">
												<strong>Minimum field length: 3</strong>
											</mat-error>
											<mat-error *ngIf="isControlHasError('newconfirmPassword','maxlength')">
												<strong>Maximum field length: 100</strong>
											</mat-error>
										</mat-form-field>
									</div>
								</div>
								<div class="form-group">
									<button class="btn-primary btn" (click)="onSumbit2()">Change Password</button>
								</div>
							</form>
						</div>
				</ng-template>
			</mat-tab>
			<mat-tab [disabled]="!user || !user.id">
				<ng-template mat-tab-label>
					<!-- <i class="mat-tab-label-icon fas fa-dollar-sign"></i> -->
					Upload Files
				</ng-template>
				<ng-template matTabContent>
					<div class="kt-form__section kt-form__section--first">
						<div class="kt-wizard-v2__form">
							<div class="form-group row">
								<!-- <label class="col-form-label col-lg-3 col-sm-12">Multiple File Upload</label> -->
								<div class="col-lg-12 col-md-9 col-sm-12">
									<hr style="background-color:white!important;color: white!important;">
									<div class="kt-form-section">
										<label style="padding-bottom: 15px;">Uploaded Files</label>
										<div class="kt-widget4" style="padding-left: 30px;overflow: auto;min-width: 300px;">
											<div *ngIf ="data && data.length > 0">
												<ng-container *ngFor="let item of data">
													<ng-container [ngTemplateOutlet]="itemTemplate" [ngTemplateOutletContext]="{item: item}"></ng-container>
												</ng-container>
											</div>
											<div *ngIf ="data.length == 0">
												<p>No Data</p>
											</div>
										</div>
										<ng-template #itemTemplate let-item="item">
											<div class="kt-widget4__item">
												<div class="kt-widget4__pic kt-widget4__pic--pic" *ngIf="item.pic">
													<img [attr.src]="item.pic" alt="">
												</div>
												<span class="kt-widget4__icon" *ngIf="item.icon">
													<i [ngClass]="item.icon"></i>
												</span>
										
												<a href="javascript:;" [attr.href]="item.url" class="kt-widget4__title" *ngIf="item.title && !item.desc">{{item.title}}</a>
										
												<div class="kt-widget4__info" *ngIf="item.desc">
													<a href="javascript:;" [attr.href]="item.url" class="kt-widget4__username">{{item.username}}</a>
													<a href="javascript:;" [attr.href]="item.url" class="kt-widget4__title">{{item.title}}</a>
													<p class="kt-widget4__text" *ngIf="item.desc">{{item.desc}}</p>
												</div>
										
												<ng-container [ngTemplateOutlet]="actionTemplate" [ngTemplateOutletContext]="{item: item}"></ng-container>
											</div>
										</ng-template>
									</div>
									<hr style="background-color:white!important;color: white!important;">
								</div>
								<!-- <div class="col-lg-12 col-md-9 col-sm-12">
									<label for="">Uploading Files</label>
									<div class="dropzone dropzone-default dropzone-brand" id="kt_dropzone_1" style="background: transparent!important;">
										<div class="dropzone-msg dz-message needsclick">
											<h3 class="dropzone-msg-title">Drop files here or click to upload.</h3>
											<span class="dropzone-msg-desc">Upload up to 10 files</span>
										</div>
									</div>
								</div> -->
							</div>
						</div>
					</div>
				</ng-template>
			</mat-tab>
			
			<mat-tab *ngIf="user" [disabled]="!user || !user.id">
				<ng-template mat-tab-label>
					<i class="mat-tab-label-icon fa fa-unlock"></i>
					User roles
				</ng-template>
				<ng-template matTabContent>
					<kt-user-roles-list [(rolesSubject)]="rolesSubject"></kt-user-roles-list>
				</ng-template>
			</mat-tab>
			<!-- <mat-tab *ngIf="user" [disabled]="!user || !user.id">
				<ng-template mat-tab-label>
					<i class="mat-tab-label-icon fa fa-exchange-alt"></i>
					Change password
				</ng-template>
				<ng-template matTabContent>
					<kt-change-password [userId]="user.id"></kt-change-password>
				</ng-template>
			</mat-tab> -->
		</mat-tab-group>
	</kt-portlet-body>
</kt-portlet>
